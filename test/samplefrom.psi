
def Nice(y){
    x := SampleFrom("(x;y) => [-y<=x]*[x<=y]*x^2",y);
    return x;
}

def main(){
    x := Nice(3);
    y := Nice(4);
    return x+y; // expected: ((-9·r₁+-r₁³·⅟3+3·r₁²+9)·[-1+-r₁≠0]·[-1+-r₁≤0]·r₁²+(3·r₁²+9+9·r₁+r₁³·⅟3)·[-1+r₁≤0]·[-r₁+1≠0]·r₁²+-128·[-r₁+1≤0]·r₁+-3/10·[-1+r₁≤0]·[-r₁+1≠0]·r₁⁵+-3·[-1+-r₁≠0]·[-1+-r₁≤0]·r₁⁴+-3·[-1+r₁≤0]·[-r₁+1≠0]·r₁⁴+-81/2·[-1+-r₁≠0]·[-1+-r₁≤0]·r₁+-9·[-1+r₁≤0]·[-r₁+1≠0]·r₁³+1024/5·[-r₁+1≤0]+1024/5·[1+r₁≤0]+128·[1+r₁≤0]·r₁+243/5·[-1+-r₁≠0]·[-1+-r₁≤0]+243/5·[-1+r₁≤0]·[-r₁+1≠0]+3/10·[-1+-r₁≠0]·[-1+-r₁≤0]·r₁⁵+64/3·[-r₁+1≤0]·r₁²+64/3·[1+r₁≤0]·r₁²+81/2·[-1+r₁≤0]·[-r₁+1≠0]·r₁+9·[-1+-r₁≠0]·[-1+-r₁≤0]·r₁³)·([-1+-r₁≠0]·[-1+-r₁≤0]·[-1+r₁≤0]·[-r₁+1≠0]·⅟768+[-1+-r₁≠0]·[-7+r₁≤0]·[-r₁+1≤0]·⅟768+[-7+-r₁≤0]·[-r₁+1≠0]·[1+r₁≤0]·⅟768)
}
