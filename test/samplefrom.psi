
def nice(y){
    x := sampleFrom("(x;y) => [-y<=x]*[x<=y]*x^2",y);
    return x;
}

def main(){
    x := nice(3);
    y := nice(4);
    return x+y; // expected: (-1/30·[-1+-r≠0]·[-1+-r≤0]·r⁵+-128·[-r+1≠0]·[-r+1≤0]·r+-81/2·[-1+-r≠0]·[-1+-r≤0]·r+1/30·[-1+r≤0]·r⁵+1024/5·[-r+1≠0]·[-r+1≤0]+1024/5·[1+r≤0]+128·[1+r≤0]·r+243/5·[-1+-r≠0]·[-1+-r≤0]+243/5·[-1+r≤0]+64/3·[-r+1≠0]·[-r+1≤0]·r²+64/3·[1+r≤0]·r²+81/2·[-1+r≤0]·r+9·[-1+-r≠0]·[-1+-r≤0]·r²+9·[-1+r≤0]·r²)·(1/768·[-1+-r≠0]·[-1+-r≤0]·[-1+r≤0]+1/768·[-7+-r≤0]·[1+r≤0]+1/768·[-7+r≤0]·[-r+1≠0]·[-r+1≤0])
}
