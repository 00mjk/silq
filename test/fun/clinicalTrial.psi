def main(){
    controlGroup := [0,0,1,0,0];
    treatedGroup := [1,0,1,1,1];

    isEffective := flip(1/2);
    probIfTreated := beta(1,1);
    probIfControl := if isEffective { beta(1,1) } else { probIfTreated };

    for i in [0..controlGroup.length){
        observe(controlGroup[i] == flip(probIfControl));
    }
    for i in [0..treatedGroup.length){
        observe(treatedGroup[i] == flip(probIfTreated));
    }

    isEffectiveP := sample(Marginal(isEffective));
    observe(isEffective);
    return (isEffectiveP,probIfTreated,probIfControl); // expected: (-124740000/17·probIfControl³·probIfTreated⁵+-20790000/17·probIfControl·probIfTreated⁵+-20790000/17·probIfControl⁵·probIfTreated⁵+-83160000/17·probIfControl²·probIfTreated⁴+-83160000/17·probIfControl⁴·probIfTreated⁴+124740000/17·probIfControl³·probIfTreated⁴+20790000/17·probIfControl·probIfTreated⁴+20790000/17·probIfControl⁵·probIfTreated⁴+83160000/17·probIfControl²·probIfTreated⁵+83160000/17·probIfControl⁴·probIfTreated⁵)·(1/1800·δ[-isEffectiveP+1]+1/5544·δ[isEffectiveP])·[-1+probIfControl≤0]·[-1+probIfTreated≤0]·[-probIfControl≤0]·[-probIfTreated≤0]
    // TODO: keep polynomial in factored form
}
